╔══════════════════════════════════════════════════════════════════════════════╗
║                                                                              ║
║          MOOD-DRIVEN AMBIENT CONTROL SYSTEM - TWO LED SETUP                  ║
║                     Complete Wiring & Implementation                         ║
║                                                                              ║
╚══════════════════════════════════════════════════════════════════════════════╝


█████████████████████████████████████████████████████████████████████████████
█ SYSTEM OVERVIEW
█████████████████████████████████████████████████████████████████████████████

Face Detection (Webcam) 
          │
          ▼
┌─────────────────────────┐
│  Emotion Detection      │
│  (TensorFlow Model)     │
└─────────────┬───────────┘
              │
    ┌─────────┼─────────┐
    │         │         │
    ▼         ▼         ▼
Positive   Neutral   Negative
 Emotion             Emotion
    │         │         │
    └─────┬───┴────┬────┘
          │        │
          ▼        ▼
    ┌──────────┬──────────┐
    │          │          │
    ▼          ▼          ▼
🟢 GREEN   (Alternate)  🔴 RED
  LED                  LED
  Pin 10               Pin 11


█████████████████████████████████████████████████████████████████████████████
█ HARDWARE CONNECTIONS
█████████████████████████████████████████████████████████████████████████████

                        ┌─────────────────────────┐
                        │    ARDUINO UNO          │
                        │                         │
                        │  Digital Pins:          │
                        │  ┌───┬───┬───┬───┐      │
                        │  │...│10 │11 │...│      │
                        │  └───┴───┴───┴───┘      │
                        │       │   │             │
                        │    GND Ref              │
                        │       │   │             │
                        └──┬────┴───┴──┬──────────┘
                           │          │
                    ┌──────┴──┬───────┴──────┐
                    │         │             │
                    │    ┌────────────┐      │
                    │    │Breadboard  │      │
                    │    │ GND Row    │      │
                    │    └────────────┘      │
                    │         │             │
         ┌──────────┘         │             └──────────┐
         │                    │                        │
         │    ┌───[220Ω]──┬───┘                ┌───[220Ω]──┬───┐
         │    │           │                    │           │   │
         ▼    │           ▼                    ▼           │   ▼
    Arduino   │      ┌───────────┐         Arduino        │ ┌───────────┐
    Pin 10    │      │ 🟢 GREEN  │         Pin 11        │ │ 🔴 RED    │
              │      │ LED ANODE │                       │ │ LED ANODE │
              │      │     (+)   │                       │ │     (+)   │
              │      └─────┬─────┘                       │ └─────┬─────┘
              │            │                             │       │
              └────────────┘                             └───────┘
                           │                                  │
                    LED CATHODE (-)                   LED CATHODE (-)
                           │                                  │
                           └──────────────┬──────────────────┘
                                         │
                                  ┌──────▼──────┐
                                  │ Breadboard  │
                                  │ GND Rail    │
                                  │ (Common)    │
                                  └─────┬───────┘
                                        │
                                   Shared GND


█████████████████████████████████████████████████████████████████████████████
█ COMPONENT LAYOUT (Breadboard View - Front)
█████████████████████████████████████████████████████████████████████████████

                    Arduino Side
                         │
                  ┌──────┴──────┐
                  │Pin10│Pin11  │
                  └──┬───┬───────┘
                     │   │
    ┌────────────────┴─┬─┴─────────────┬──────────────┐
    │                  │               │              │
    │    Breadboard    │               │              │
    │                  │               │              │
    │  Positive Rail (Red):            │              │
    │  +  +  +  +  +  +  +  +  +      │              │
    │                                  │              │
    │  Row A: [220Ω]   ┌─────────────┐│              │
    │   ▲▲▲▲▲          │    🟢 LED   ││              │
    │  From Pin 10     │   (LONG LEG)││              │
    │                  └───────┬──────┘│              │
    │                          │       │              │
    │  Row B: [220Ω]   ┌─────────────┐│              │
    │   ▲▲▲▲▲          │    🔴 LED   │└──────┐       │
    │  From Pin 11     │   (LONG LEG)│       │       │
    │                  └───────┬──────┘       │       │
    │                          │              │       │
    │  Negative Rail (Blue -):  │              │       │
    │  -  -  -  -  -  -  -  -  ┤              │       │
    │                          │              │       │
    │  GND Connection:         │              │       │
    │  ─ Arduino GND ◄─────────┴──────────────┘       │
    │                                                  │
    └──────────────────────────────────────────────────┘


█████████████████████████████████████████████████████████████████████████████
█ LED PIN ASSIGNMENT
█████████████████████████████████████████████████████████████████████████████

┌──────────────────────────────────────────────────────────────────────────┐
│ LED 1 (Positive Mood - Green)                                            │
├──────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Arduino Pin:        10 (PWM Capable)                                   │
│  Resistor:           220Ω (1/4W) - Current Limiting                     │
│  LED Type:           Green, 5mm, Common Cathode                         │
│  LED Forward Voltage: ~2.0V                                             │
│  LED Current:        ~20mA (max)                                        │
│  Emotions:           HAPPY, SURPRISE                                     │
│  Pattern:            BLINK (2 Hz default)                               │
│                                                                          │
│  Connection:  Arduino Pin 10 ──[220Ω]──→ Green LED (+)                 │
│                                              └─→ GND                    │
│                                                                          │
└──────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────┐
│ LED 2 (Negative Mood - Red)                                              │
├──────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Arduino Pin:        11 (PWM Capable)                                   │
│  Resistor:           220Ω (1/4W) - Current Limiting                     │
│  LED Type:           Red, 5mm, Common Cathode                           │
│  LED Forward Voltage: ~2.0V                                             │
│  LED Current:        ~20mA (max)                                        │
│  Emotions:           SAD, ANGRY, FEAR, DISGUST                          │
│  Pattern:            BLINK (2 Hz default)                               │
│                                                                          │
│  Connection:  Arduino Pin 11 ──[220Ω]──→ Red LED (+)                   │
│                                              └─→ GND                    │
│                                                                          │
└──────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────┐
│ Ground Reference (Common GND)                                             │
├──────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Arduino Ground:     GND Pin                                            │
│  Function:           Common reference point for all components          │
│  Connection:         Arduino GND ──→ Breadboard GND Rail (Blue -)      │
│                                                                          │
│  All components connected to this rail:                                 │
│  ├─ Green LED cathode (short leg)                                       │
│  ├─ Red LED cathode (short leg)                                         │
│  └─ Arduino GND reference                                               │
│                                                                          │
└──────────────────────────────────────────────────────────────────────────┘


█████████████████████████████████████████████████████████████████████████████
█ EMOTION TO LED MAPPING
█████████████████████████████████████████████████████████████████████████████

POSITIVE EMOTIONS
┌─────────────────────────────────────────────────────────────────────────┐
│ 😊 HAPPY                                                                │
│ ├─ Confidence: High (>0.7)                                              │
│ ├─ LED Response: 🟢 Green LED BLINKS at 2 Hz                            │
│ ├─ Duration: Until emotion changes                                       │
│ └─ Pin: 10 | Command: PIN_10_BLINK_2                                   │
│                                                                          │
│ 😲 SURPRISE                                                             │
│ ├─ Confidence: High (>0.7)                                              │
│ ├─ LED Response: 🟢 Green LED BLINKS at 2 Hz                            │
│ ├─ Duration: Until emotion changes                                       │
│ └─ Pin: 10 | Command: PIN_10_BLINK_2                                   │
└─────────────────────────────────────────────────────────────────────────┘

NEGATIVE EMOTIONS
┌─────────────────────────────────────────────────────────────────────────┐
│ 😢 SAD                                                                  │
│ ├─ Confidence: High (>0.7)                                              │
│ ├─ LED Response: 🔴 Red LED BLINKS at 2 Hz                              │
│ ├─ Duration: Until emotion changes                                       │
│ └─ Pin: 11 | Command: PIN_11_BLINK_2                                   │
│                                                                          │
│ 😠 ANGRY                                                                │
│ ├─ Confidence: High (>0.7)                                              │
│ ├─ LED Response: 🔴 Red LED BLINKS at 2 Hz                              │
│ ├─ Duration: Until emotion changes                                       │
│ └─ Pin: 11 | Command: PIN_11_BLINK_2                                   │
│                                                                          │
│ 😨 FEAR                                                                 │
│ ├─ Confidence: High (>0.7)                                              │
│ ├─ LED Response: 🔴 Red LED BLINKS at 2 Hz                              │
│ ├─ Duration: Until emotion changes                                       │
│ └─ Pin: 11 | Command: PIN_11_BLINK_2                                   │
│                                                                          │
│ 🤢 DISGUST                                                              │
│ ├─ Confidence: High (>0.7)                                              │
│ ├─ LED Response: 🔴 Red LED BLINKS at 2 Hz                              │
│ ├─ Duration: Until emotion changes                                       │
│ └─ Pin: 11 | Command: PIN_11_BLINK_2                                   │
└─────────────────────────────────────────────────────────────────────────┘

NEUTRAL EMOTION
┌─────────────────────────────────────────────────────────────────────────┐
│ 😐 NEUTRAL                                                              │
│ ├─ Confidence: Medium (0.4-0.7)                                         │
│ ├─ LED Response: 🟢🔴 Both LEDs BLINK ALTERNATELY at 1 Hz               │
│ │  └─ Pattern: Green ON → Red ON → Green ON... (alternating)           │
│ ├─ Duration: Until emotion changes                                       │
│ └─ Both Pins | Command: BOTH_BLINK_ALT_1                               │
└─────────────────────────────────────────────────────────────────────────┘


█████████████████████████████████████████████████████████████████████████████
█ SIGNAL FLOW DIAGRAM
█████████████████████████████████████████████████████████████████████████████

        STEP 1: CAPTURE
    ┌────────────────────┐
    │   Webcam/Camera    │ → Captures video frame
    └────────────────────┘
              │
              ▼
        STEP 2: DETECT
    ┌────────────────────┐
    │   Face Detector    │ → Finds face in frame
    └────────────────────┘
              │
              ▼
        STEP 3: ANALYZE
    ┌────────────────────┐
    │ Emotion Detector   │ → Predicts emotion + confidence
    │ (Neural Network)   │
    └────────────────────┘
              │
              ▼ (Emotion: happy, Confidence: 0.95)
        STEP 4: MAP
    ┌────────────────────┐
    │ Mood Mapping       │ → happy → POSITIVE → 🟢
    │ emotion_to_mood()  │
    └────────────────────┘
              │
              ▼ (Mood: POSITIVE)
        STEP 5: CONTROL
    ┌────────────────────┐
    │ LED Controller     │ → Decide LED action
    │ set_mood()         │   (BLINK at 2 Hz)
    └────────────────────┘
              │
              ▼ (Command: PIN_10_BLINK_2)
        STEP 6: SEND
    ┌────────────────────┐
    │ Serial Connection  │ → Send via USB UART
    │ (9600 baud)        │
    └────────────────────┘
              │
              ▼ (Physical Signal)
        STEP 7: EXECUTE
    ┌────────────────────┐
    │    Arduino UNO     │ → Parse command
    │ processCommand()   │
    └────────────────────┘
              │
              ▼ (digitalWrite(10, state))
        STEP 8: DISPLAY
    ┌────────────────────┐
    │  🟢 Green LED      │ → Blinks at 2 Hz (500ms period)
    │   (Pin 10)         │
    └────────────────────┘


█████████████████████████████████████████████████████████████████████████████
█ PYTHON CODE EXECUTION FLOW
█████████████████████████████████████████████████████████████████████████████

Program Start
    │
    ├─ Initialize Face Detector
    ├─ Initialize Emotion Detector
    ├─ Initialize LED Controller (with serial connection)
    └─ Open Camera
              │
              ├─ Main Loop ◄─────────────────────┐
              │   │                              │
              │   ├─ Capture frame               │
              │   │                              │
              │   ├─ Detect faces                │
              │   │                              │
              │   ├─ For each face:              │
              │   │   ├─ Extract face region     │
              │   │   └─ predict_emotion()       │
              │   │       Returns: (emotion, confidence)
              │   │                              │
              │   ├─ led_controller.set_mood()   │
              │   │   ├─ Map emotion to mood     │
              │   │   └─ send_command_to_arduino()
              │   │       Sends: "PIN_10_BLINK_2"
              │   │       or "PIN_11_BLINK_2"    │
              │   │       or "BOTH_BLINK_ALT_1"  │
              │   │                              │
              │   ├─ Display on screen           │
              │   │                              │
              │   └─ time.sleep(0.033) ◄────────┤
              │       (~30 FPS)                  │
              │                                  │
              └─ Press 'q' to quit               │
              │   ─────────────────────────────┘
              │
    Release Resources
    ├─ Close camera
    ├─ Close serial connection
    └─ Exit


█████████████████████████████████████████████████████████████████████████████
█ ARDUINO FIRMWARE EXECUTION
█████████████████████████████████████████████████████████████████████████████

Setup (runs once)
    │
    ├─ Initialize Pin 10 as OUTPUT (LED1)
    ├─ Initialize Pin 11 as OUTPUT (LED2)
    ├─ Set both pins to LOW (off)
    └─ Initialize Serial @ 9600 baud
              │
              ├─ Main Loop (runs continuously) ◄──┐
              │   │                               │
              │   ├─ Check Serial Buffer          │
              │   │                               │
              │   ├─ If command available:        │
              │   │   ├─ Read command string      │
              │   │   ├─ Parse command            │
              │   │   ├─ processCommand()         │
              │   │   │   ├─ Match "PIN_10_ON"    │
              │   │   │   ├─ Match "PIN_10_BLINK" │
              │   │   │   ├─ Match "PIN_11_ON"    │
              │   │   │   ├─ Match "PIN_11_BLINK" │
              │   │   │   └─ Match "BOTH_BLINK_ALT"
              │   │   ├─ Execute action           │
              │   │   └─ Send acknowledgment      │
              │   │                               │
              │   ├─ Update LED states            │
              │   │   ├─ updateLEDs()             │
              │   │   │   ├─ Check blink timers   │
              │   │   │   ├─ Toggle if needed     │
              │   │   │   └─ digitalWrite()       │
              │   │   └─ Handles real-time       │
              │   │       blinking without       │
              │   │       blocking               │
              │   │                               │
              │   └─ delay(10ms) ───────────────┘


█████████████████████████████████████████████████████████████████████████████
█ IMPLEMENTATION SUMMARY
█████████████████████████████████████████████████████████████████████████████

✅ COMPLETED COMPONENTS:
   ├─ Hardware Design (2 LEDs + Resistors + Breadboard)
   ├─ Arduino Sketch (mood_led_control.ino)
   ├─ Python LED Control Module (led_control.py)
   ├─ Emotion Detection (emotion_detector.py)
   ├─ Main Integration (main.py)
   ├─ Serial Communication (9600 baud)
   ├─ Command Protocol (20 different commands)
   └─ Documentation (Complete with diagrams)

📋 FILES INVOLVED:
   ├─ arduino_sketch/mood_led_control.ino (Arduino firmware)
   ├─ src/led_control.py (Python LED control)
   ├─ src/emotion_detector.py (Emotion prediction)
   ├─ src/main.py (Real-time integration)
   ├─ CIRCUIT_WIRING_GUIDE.md (Hardware reference)
   ├─ TWO_LED_IMPLEMENTATION.md (This guide)
   └─ QUICK_REFERENCE.md (Quick lookup)

⚙️ TECHNICAL SPECS:
   ├─ Baud Rate: 9600
   ├─ LED Pins: 10 (Green), 11 (Red)
   ├─ Resistors: 220Ω (both LEDs)
   ├─ Max LED Current: 20mA per LED
   ├─ Blink Frequency: 1-10 Hz (configurable)
   ├─ Arduino Type: UNO/Nano compatible
   └─ Python Version: 3.7+ (with TensorFlow, OpenCV)

🎯 READY FOR DEPLOYMENT!


End of Diagram
